<div class="workspace">
  <div class="workspace__chart">
    <div class="js-workspace-chart"></div>
  </div>

  <div class="resources-container">
    <button class="orb orb--resources workspace__orb--left js-toggle-sidebar" data-target=".js-resources-sidebar">
      <span class="workspace-orb__label">
        <i class="icon icon--pawn"></i>
      </span>
      <span class="workspace-orb__label--alt">Close</span>
    </button>

    <section class="resources sidebar workspace__sidebar--left js-resources-sidebar">
      <h1 class="resources__title">Resources</h1>
      <ul class="resources__list js-resources-list">
        <%- @workspace.resources.each do |resource| %>
          <li> <span> <%= resource.name %> (<a href="javascript:;" class="js-open-allocate-form" data-resource-name="<%= resource.name %>" data-resource-id="<%= resource.id %>">allocate</a>)</span> </li>
        <%- end %>
      </ul>

      <form class="js-new-resource-form" action="<%= resources_path(version:1, wid: @workspace.unique_id)%>" data-method="post" >
        <div class="form-inline">
          <input type="text" autocomplete="off" class="form-control form-control--clear input--large js-group-input-name js-name" placeholder="<%= @workspace.resources_name %> Name" name="resource[name]" data-name="name">
          <input type="submit" class="button button--info button--large float--right js-submit" value="New">
        </div>
      </form>

    </section>
  </div>

  <div class="groups-container">
    <button class="orb orb--groups workspace__orb--right js-toggle-sidebar" data-target=".js-groups-sidebar">
      <span class="workspace-orb__label">
        <i class="icon icon--group"></i>
      </span>
      <span class="workspace-orb__label--alt">Close</span>
    </button>

    <div class="groups sidebar workspace__sidebar--right js-groups-sidebar">
      <form class="js-new-resource-group-form" action="<%= resource_groups_path(version:1, wid: @workspace.unique_id)%>" data-method="post" >
        <div class="form-inline">
          <input type="text" autocomplete="off" class="form-control form-control--clear input--large js-group-input-name js-name" placeholder="<%= @workspace.resource_groups_name %> Name" name="resource_group[name]" data-name="name">
          <input type="submit" class="button button--info button--large float--right js-submit" value="OK">
        </div>
      </form>
    </div>
  </div>

  <div class="workspace__slider">
    <input type="text" id="js-workspace-date-slider" />
  </div>
</div>

<% content_for :javascripts do %>
  <script id="js-new-allocation-form-template" type="text/html">
    <form class="js-new-allocation-form" action="<%= allocations_path(version:1, wid: @workspace.unique_id)%>" data-method="post" >
      <input class="js-resource-id" type="hidden" name="allocation[resource_id]" data-name="resource_id" value="{{resourceId}}">

      <input class="js-start-date" type="hidden" name="allocation[start_date]" data-name="start_date" value="{{startDate}}">

      <input class="js-end-date" type="hidden" name="allocation[ent_date]" data-name="end_date" value="{{endDate}}">

      <div class="form-inline">
        <label for="allocation[resource_group_id]" class="col-sm-2 control-label"><%= @workspace.resource_groups_name %></label>

        <select class="form-control js-resource-group-id" name="allocation[resource_group_id]" data-name="resource_group_id">
          {{#resourceGroups}}
            <option value="{{id}}">{{name}}</option>
          {{/resourceGroups}}
        </select>
      </div>

      <button type="submit" class="js-submit btn btn-default">OK</button>
    </form>
  </script>

  <script id="js-resources-list-item-template" type="text/html">
    <li>{{ name }}</li>
  </script>

  <script id="js-resources-group-template" type="text/html">
    <div class="workspace-chart__group js-workspace-chart-group" style="background-color: {{ bg_color }}">
      <div class="workspace-chart-group__title js-group-title">{{ name }}</div>
    </div>
  </script>

  <script id="js-resource-template" type="text/html">
    <div class="workspace-chart__resource js-workspace-chart-resource">{{ name }}</div>
  </script>

  <script type="text/javascript" charset="utf-8">
    Resorcery.workspaceId = <%= @workspace.unique_id.to_json.html_safe %>;
    NewResourceGroupForm.init(".js-new-resource-group-form");
    NewResourceForm.init(".js-new-resource-form", ".js-resources-list");
  </script>
<% end %>

